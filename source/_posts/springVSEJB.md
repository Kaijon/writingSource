---
title: springVSEJB
date: 2016-11-22 13:58:06
tags:
---

转自 ： http://www.javanb.com/j2ee/1/10443.html
Spring和Ejb3.0虽然都是为了向企业服务提供耦合松散的POJO，但是使用了不同方法来达到这个目的。两者都大量地使用了依赖注入。

这两个框架结构都有一个共同核心设计理念：**将中间件服务传递给耦合松散的POJOS** (Plain Old Java Objects, 简单洁净Java对象)。这样的框架利用截取执行上下文或在运行时将服务对象注入POJO来把应用服务“缠绕”到POJO。POJO本身并不关心这种“缠绕”，对这种框架结构也没有什么依赖。因此，开发者可专注于业务逻辑和脱离框架的POJO单元测试。除此之外，由于POJO并不须要继承框架的类或实现其接口，开发者能够极其灵活地搭建继承结构和建造应用。

## 服务整合
从一个很高的角度上看，**Spring框架处于应用服务器和服务库的上方**。**服务整合的代码（如，数据访问模板和帮助类）属于框架，并暴露于应用开发者**。相反，**EJB3.0框架与应用服务器高度整合，服务整合代码也包装在一个标准接口后面**。

因此，实现EJB3.0的厂商可以大大地优化整体性能和提升开发者的体验。例如，在JBoss EJB3.0的实现中，当你在用EntityManager持久化一个Entity Bean时，后台的Hibernate会话事务已经自动地帮定到调用方法的JTA 的事务上，在JTA 事务提交的同时Hibernate会话事务也提交了。你甚至可以使用一个简单的 @PersistenceContext 注释（稍候例子演示）将EntityManager和它后台的Hibernate事务绑定到一个stateful session bean的应用事务中。在一个会话中应用事务横跨多个线程，这在事务性网页应用很有用，例如，多页面的购物车。
由于高度整合的EJB3.0的框架，使简单、集成的编程接口成为可能。Oracle EJB3.0框架和其后台的Toplink持久化服务也同样程度地整合。

另一个EJB3.0整合服务的绝好例子就是集群支持。假如你在一个服务器集群上部署了一个EJB3.0的应用，所有容错(fail-over)、负载均衡、分布式缓冲和状态复制都已经自动为应用所获得可用。后台的集群支持被隐藏在EJB3.0的框架后面，对EJB3.0开发者来说这些都是完全透明不可见的。

**在Spring 里，很难优化框架和服务之间的通讯**。例如，为了使用Spring里的声明事务服务来管理Hibernate事务，你必须显示地在XML文件中配置 Spring TransactionManager和Hibernate SessionFactory对象。Spring必须显示地管理横跨多个HTTP请求的事务。除此之外，没有别的方法均衡Spring应用里的集群。


## 服务组合的弹性
由于**Spring的服务整合代码作为编程接口的一部份暴露在外，应用开发者有按自己需求装配服务的弹性**。这个特点使你能够组合自己的`轻量级应用服务器`。 Spring的一个普遍用法就是将Tomcat和Hibernate组合在一起支持数据库驱动的web应用。在这种情况，Spring本身提供事务服务， Hibernat提供持久化服务——这种设置创建了一个袖珍型的应用服务器。

**EJB3.0应用服务器典型地不提供这种根据需求任你挑捡服务的弹性空间**。大多数时间，你得到的只是一系列包装好的特性，其中一些你可能根本就不需要。但是如果应用服务器像JBoss一样提供一个模块性的内部设计，那么你可以只取其中一部分，而把不必要的部分剥去。在任何情况，去自定义一个功能强大的应用服务器是没有什么价值的。

当然，假如应用已经超过单个点，那么你应该加入常用服务器上的服务，例如，资源池（resource pooling），消息队列（message queuing）和集群（clustering）。就总体的资源消耗而言，Spring解决方法和其他EJB3.0解决方法一样是重量级的。

在Spring 框架里，具有弹性的服务装配使得将虚拟对象而不是真正的业务对象绑定到应用中做脱离容器的单元测试更简单。在EJB3.0应用中，大多数组件都是简单 POJO，他们可以很容易地在容器外被测试。但是对于与容器服务相关的对象（例如持久化实实体管理器EntityManager）建议用容器内测试。因为这样会比虚拟对象测试方法更简单，强壮及准确。

--- 
### 什么是中间件？
一般概念下的中间件是指，能搭建运行在好多地方（分布式环境）的通用的软件接口， 
是介于操作系统和应用程序之间的产品，可以理解为面向信息系统交互、集成过程中的**通用部分的集合**，屏蔽了底层的通讯，交互，连接等复杂又通用化的功能，以产品的形式提供出来，系统在交互时，直接采用中间件进行连接和交互即可，避免了大量的代码开发和人工成本。

